# ミスを誘発するフォーム

もとよりユーザーはミスをするものですが、フォームのインターフェイスによっては、ミスや誤操作を誘発してしまうことがあります。誤操作を誘発しないように設計し、たとえ誤操作しても致命的な問題が起きないようにしましょう。

## よく見られる問題

### リセットボタンを誤って押してしまい、入力内容が消える

送信ボタンの近くにリセットボタンが配置されている例。間違えて押してしまうと、入力した内容が全て消えてしまう。

### 意図せず送信したり戻ったりしてしまう

郵便番号入力欄の例。郵便番号を7桁入力し終えると住所が自動的に補完され、同時にフォーカスが外れてしまう。このとき住所や郵便番号を修正しようとしてBackspaceキーを押すと、意図せず「戻る」動作になり、入力内容が消えてしまう。

### 意図せずフォーカスが移動し、誤入力する

分割されたカード番号の入力欄で、4桁入力した瞬間に自動で次の欄にフォーカスが移る例。ユーザーがTabキーを押して次の欄に入力しようとすると、ひとつ飛ばして入力してしまうことになる。

### 無効な選択ができてしまい、エラーになる

チケット予約システムでセレクトボックスから日付を選ぶ例。一見問題ないが、過去の日付も選べてしまい、その状態で送信するとエラーとなってしまう。

## ここが問題! 誤操作が頻発するとユーザーは入力を完了できない

フォームの設計がまずいと、ユーザーの誤操作を誘発してしまいます。誤操作したときに入力内容が全て消えてしまうといった致命的な問題が起きると、ユーザーは入力を完遂できなくなってしまいます。

### リセットボタンを誤って押してしまい、入力内容が消える

リセットボタンは、フォームの内容を全て初期化するものです。これが送信ボタンの近くに配置されている場合、誤って押してしまうことがあります。特にキーボードで操作している場合、送信ボタンの直前にリセットボタンが配置されていると、リセットボタンに先にフォーカスが当たるため、誤って押してしまう可能性が高くなります。

### 意図せず送信したり戻ったりしてしまう

フォームの多くはキーボードからの入力を必要とするため、普段はマウス操作をしているユーザーも、フォームはキーボードで操作することが多くなります。ここで問題になるのは、EnterキーとBackspaceキーによる操作です。これらのキーは、フォーカスがフォームの入力欄にあるときと、そうでないときとで挙動が異なり、入力欄では IMEによる変換操作をしているかどうかでも挙動が異なります。

一般的な挙動を表にまとめると、以下のようになります（表1）。

表1：状況によるEnterとBackspaceの機能の違い

|状況|Enter|Backspace|
|:|:|:|
|一行入力欄にフォーカスがあるとき|フォーム送信（変換中のときは確定） |一文字削除（変換中のときは変換前に戻す）|
|複数行入力欄にフォーカスがあるとき|改行（変換中のときは確定）| 一文字削除（変換中のときは変換前に戻す）|
|ボタンやリンクにフォーカスがあるとき|そのボタンを押す|ブラウザバック|
|それ以外の要素にフォーカスがあるとき|何も起きない|ブラウザバック|

特に問題となるのは、テキストを編集しようとしてEnterやBackspaceを押した際、フォーム送信やブラウザバックの動作になってしまうことです。これらは画面遷移を伴い、場合によってはエラーが出るため、誤って発動するとユーザーは大いに混乱することになります。特に、複雑なUIを導入していたり、自動でフォーカスを移動したりしているケースでは、このような誤操作が起こりやすくなります。

### 意図せずフォーカスが移動し、誤入力する

キーボードでフォームを操作する際は、Tabキーなどでフォーカスを移動し、コントロールに入力し、またフォーカスを移動する繰り返しとなります。この際、勝手にフォーカスが移動すると、ユーザーは混乱し、誤った欄に入力してしまうことがあります。

たとえば、分割された入力欄で、既定の桁数を入力すると自動で次の欄にフォーカスが移るような仕組みがあります。このような仕組みは、マウスを使っているユーザーには便利に感じられるかもしれません。しかし、キーボードを利用している場合、フォーカスが移動したことに気づかずにTabキーを押し、さらにひとつ先の欄で入力を行ってしまうことがあります。特に、スクリーンリーダーのユーザーや画面を拡大しているユーザーの場合、入力欄を飛ばしてしまったことに気づかない可能性があります。

また、誤入力していた場合、通常であればその場ですぐに訂正ができますが、フォーカスが移動されていると、わざわざフォーカスを戻してから修正しなければなりません。

### 無効な選択ができてしまい、エラーになる

入力や選択が可能なように見えて、実際に選択して送信するとエラーになってしまう場合があります。よくあるのは、過去の日付や無効な日付が選択できる、他との組み合わせによって無効になる選択ができてしまう、といった例です。特に、ラジオボタンやチェックボックス、セレクトボックスなどでは、提示されている選択肢は全て選んでよいように見え、無効な選択肢が含まれていてもユーザーにはわかりません。選んでよいはずなのにエラーになるため、ユーザーは混乱します（図1）。

図1：健康診断の申し込みフォームの例

男性・女性の選択肢と、乳がん検診を希望する／しないの選択肢が提示されている。男性は乳がん検診を受けられないが選択できてしまい、送信後にエラーになる。

## 解決アプローチの例

### リセットボタンは使用しない

送信ボタンだけを設け、リセットボタンを置いていない例。そもそもリセットボタンが必要とされるケースはほとんどない。

### 誤操作しても致命的な問題が出ないようにする

Backspaceキーで戻ろうとしたとき、警告が表示される例。誤操作で戻ってしまうことを防ぐことができる。

### フォーカス移動はユーザーに任せる

郵便番号から住所を補完する例。郵便番号が入力されると補完までは行うが、フォーカス移動は行わず、ユーザーの操作に任せる。ユーザーは郵便番号や住所を修正するかもしれないことに注意。

### 選べない選択肢は無効にする

選べない選択肢を無効にした例。単に色を薄くするだけでなく、フォーカスが当たらない、無効であることがスクリーンリーダーのユーザーにも伝わる、といった点にも配慮する。

## 解決アプローチ 誤操作するようなUI設計を避ける

ユーザーが誤操作しやすいリセットボタンや、誤操作を誘発する自動でのフォーカス移動はできるだけ避けるようにします。また、入力内容が消えるような致命的な操作を行う際は一拍置いて警告を表示し、ユーザーに確認を促しましょう。

### リセットボタンは使用しない、使用する際は警告する

まずは、リセットボタンが本当に必要なのかどうか検討しましょう。通常、入力内容を修正する際には該当の項目いくつかを修正するだけでよく、内容を全て消す必要はないことがほとんどです。使われることが少ない割に誤操作のインパクトが大きいリセットボタンは、ないほうが良いことが多いでしょう。

シミュレーターのようなコンテンツでは、フォームを初期状態に戻す操作が必要になることもあります。入力欄が少なく、リセットしても簡単に繰り返し入力できる場合は、リセットボタンを気軽に押せても問題ないでしょう。そうでない場合は、ボタンを押した瞬間にリセットされるのではなく、一度警告が出るように実装するという方法もあります。

### 誤操作しても致命的な問題が出ないようにする

ユーザーの誤操作を完全に防ぐことはできません。誤操作が起きても致命的な問題が出ないようにしておくことで、問題を緩和することができます。

#### 戻ったり送信したりする際に確認する

戻ったり送信したりする際に、操作についても、本当にその操作を実行してよいのかどうか確認する方法があります。こうすると、Enterキーによる送信やBackspaceキーによる「戻る」動作が誤って行われた場合、ユーザーは操作をキャンセルすることができます。また、入力が不完全な状態でEnterキーによる送信が実行された場合は、送信前にフォームのバリデーションを行い、エラーを出すことで問題を防ぐこともできます。「6-6 エラーの解決ができないフォーム」も参照してください。

なお、Enterキーの操作を全面的に禁止したり、常に警告が出るようにしたりすると、キーボードで操作しているユーザーが送信できなくなってしまいます。入力欄での Enterによる送信を禁止する場合、明示的な送信ボタンを用意した上で、キーボード操作でも確実に送信できることを確認しましょう。

#### 多重送信に対応する

ユーザーが誤って送信した内容がエラーにならずに受け付けられてしまった場合でも、ブラウザの「戻る」ボタンで前のフォームに戻り、入力しなおして再送信できれば大きな問題はありません。しかしこのとき、ユーザーはフォームの内容を多重送信することになります。この他、通信速度が遅かったり、サーバーの応答に時間がかかったりする場合、ユーザーは送信ボタンが押せていなかったものと思い、押しなおすことがあります。

単純な誤操作による多重送信であれば、インターフェイスの工夫で防ぐこともできます。たとえば、送信ボタンをダブルクリックしたり、Enterキーを長押したとき、送信ボタンが何度も押されて多重送信されることがあります。このような場合には、送信ボタンが押された瞬間に送信ボタンをロックし、送信中であることがわかるようにすると、多重送信を防ぐことができます。ただし、送信ボタンをロックしたままでは、通信エラー時に再送できなくなってしまいます。一定時間が過ぎたらタイムアウトとみなし、再び送信ボタンを押せるようにするべきでしょう。

しかし、先に述べたように、ユーザーが意図して多重送信することもあります。システム側では多重送信があることを前提として設計を行う必要があるでしょう。ユーザー登録のように、多重送信されても大きな問題がないケースもありますが、商品の購入のようなケースでは、商品が多重に購入されてしまう可能性があり、大きな問題になります。「6-7 確認・訂正ができないフォーム」でも述べているように、事後のキャンセルができるようにしておくことが望ましいでしょう。

### フォーカス移動はユーザーに任せる

フォーカス移動はユーザーに任せ、自動での移動はしないようにします。郵便番号から住所を補完する場合も、スクリプトで処理するのは補完するところまでとし、フォーカス移動はユーザーの操作に任せましょう。また、通常のフォーカス枠がしっかり見えるようにすること、フォーカス移動の順序を適切にすることなど、一般的なキーボード操作時のユーザビリティに心を配ることで、フォーカス移動に関する混乱を避けることができます。

### 選べない選択肢は無効にする

ユーザーが選べない、選ぶとエラーになるような選択肢は、そもそも選べないようにしましょう。状況に応じて選択肢の有効・無効が動的に切り替わる場合、単に見た目を変えるだけでなく、フォーカスが当たらないようにしたり、無効であることがスクリーンリーダーのユーザーにも伝わるようにします。 HTMLの場合、コントロールに disabled属性やaria-disabled属性をつけることで実現できます。「9-7 スクリーンリーダー対応が不適切」も参照してください。

## コラム 住所入力のインターフェイス

郵便番号と住所を入力してもらうシチュエーションはよくあります。このとき、郵便番号から住所を補完すれば、ユーザーの入力の負担を大幅に省くことができます。この機能自体は便利ですが、実装の方法によってはアクセシビリティの問題を抱えてしまうことも多いため、以下のような点に注意しましょう。

### 入力欄はひとつにする

住所の情報はコピー&ペーストで入力されることも多く、郵便番号の入力欄が分割されているとペーストによる入力が困難になります。入力欄をひとつにして1回でペーストできるようにしましょう。

### 表記ゆれを許容する

郵便番号のハイフンの有無、全角・半角の違いなどは全て許容し、どのパターンで入力されても問題なく動作するようにしましょう。住所の番地についても半角を許容し、必要であればシステム側で全角に変換するようにしましょう。

### 自動で動かさず、ボタンをトリガーにする

郵便番号を7桁入力した瞬間に補完したり、フォーカス移動時に自動で補完すると、ユーザーは何が起きたかわからずに混乱することがあります。ユーザーがボタンを押して動作するようにしましょう。また、フォーカスを自動で移動させることも混乱や入力ミスの原因となるため、避けましょう。

### 膨大な選択肢を提示しない

膨大な数の補完候補をセレクトボックスで表示して選択させるようなことは避けましょう。大量の選択肢から探すより、直接入力した方が早い場合もあります。
