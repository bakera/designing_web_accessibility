# スクリーンリーダー対応が不適切
通常、スクリーンリーダーのための特別な対応を行う必要はほとんどありません。不適切な対応をするとアクセスしづらくなる場合もあります。逆に、対応をしたほうが良い場合もあります。適切な対応を行いましょう。


## よく見られる問題

### 無効なテキストが読み上げられてしまう
色を薄くして無効なものを表現した例。スクリーンリーダーではそのまま読み上げられてしまい、無効であることがわからない。

### 別の場所が変化しても気づかない
ダイアログが出現した例。ダイアログのHTMLがページの末尾に追加されているが、現在読み上げている場所とは離れているため、スクリーンリーダーのユーザーは全く気づかない。

### スクリーンリーダー向けの過剰な機能
スクリーンリーダー専用の隠し見出しを設置している例。下に並んでいる要素が何なのか説明がないが、実は「オフィシャルスポンサー」という隠し見出しが置かれている。スクリーンリーダーのユーザー以外には、これが何なのかわからない。



## ここが問題！ 不適切なスクリーンリーダー対応は混乱を招く
スクリーンリーダーでは視覚情報が得られないため、補足情報を提供するとわかりやすくなることがあります。反面、スクリーンリーダー向けの対応が過剰になると、冗長だったり、逆に混乱を招くこともあります。

### 無効なテキストが読み上げられてしまう
テキストの色やスタイルを変えることで、その情報が無効であることを表現することがあります。

* 仕様の一覧表の中で、対応している機能は濃い色のテキストで表現し、対応していない機能は薄い色のテキストで表現することで、機能が「無効」であることを表す
* テキストの一部に打ち消し線を引くことで、そのテキストが削除された、取り消されたものであることを表す

スクリーンリーダーでは、これらはそのまま読み上げられます。テキストのスタイルは伝わらないため、無効であったり、打ち消されているということがわからず、逆の意味に誤解されてしまいます（図1）。


図1：打ち消し線が引かれたテキストと、その読み上げ


また、エラーメッセージなどをCSSで非表示にし、必要なときにJavaScriptで表示する実装はよくありますが、メッセージの隠し方によっては、スクリーンリーダーで普通に読まれてしまうことがあります。

### 別の場所が変化しても気づかない
基本的に、スクリーンリーダーはコンテンツを順に読んでいきます。視覚で画面を見る場合と異なり、すでに読み終えた部分や離れた部分が変化しても、その変化に気づかないことがあります。たとえば、フォームのエラー時にJavaScriptでエラーメッセージが挿入されるような場合、スクリーンリーダーでは何が起きたかわからないことがあります。ダイアログが表示される場合も同様で、画面上は巨大なダイアログが出ていても、スクリーンリーダーのユーザーはその存在に気づかないことがあります。


### スクリーンリーダー向けの過剰な機能
スクリーンリーダー専用の隠し見出しを追加しているケースもあります。この場合、スクリーンリーダーでは見出しが読まれ、見出しにジャンプすることもできます。しかしこの見出しはビジュアルブラウザでは表示されず、その部分が何なのかという情報はスクリーンリーダーのユーザーにしか伝わりません。

スクリーンリーダー専用に作られた要素がフォーカスを受け取る場合、ビジュアルブラウザをキーボードで操作するユーザーのアクセスを妨げるという問題もあります。「3-3コンテンツ側の冗長なアクセシビリティ機能」の「見えないスキップリンク」の項を参照してください。


## 解決アプローチの例

### 無効なテキストが読まれないようにする
無効なテキストを読まれないようにした例。画像にする、WAI-ARIAを使用するなど、スクリーンリーダーに読まれないように実装で対応する方法もある。


### 変化した部分にフォーカスを移す
出現したダイアログに、JavaScriptでフォーカスを移している例。最近のCSSフレームワークはこのような実装を採用し、スクリーンリーダーでも読まれるようにしている（図はBootstrapのModals）。


### テキストを隠さずに表示する
見出しを隠さずに表示した例。スクリーンリーダーも、他のブラウザでも見出しを読むことができ、エリアの意味がわかりやすくなる。



## 解決アプローチ スクリーンリーダーの実際に配慮した実装をする
スクリーンリーダーに対応する実装は、通常のブラウザでは確認しづらく、不足していたり、過剰なものになっていても気づきにくくなります。適切な対応をしたうえで、実際にスクリーンリーダーで確認してみると良いでしょう。


### 無効なテキストが読まれないようにする
テキストのスタイルを変えて無効なものを表現しているような場合、スクリーンリーダーではそのまま読まれ、誤解を招くことになります。「8-1見た目に頼っている」でも述べたように、見た目が再現されないと伝わらない表現を避けることが望ましいでしょう。どうしてもそのような表現が必要な場合、以下のように実装で対応する方法もあります。

#### テキストで補足する
誤解を招くことがないように、テキストで補足する方法があります。たとえば、打ち消し線をつけている部分の前後に「ここから削除」「ここまで削除」のようなテキストを入れれば、意味を誤解されることはないでしょう。ただし、この方法では表現が冗長になってしまいます。

#### 画像で実装する
テキストがスクリーンリーダーで読まれないようにする方法のひとつは、画像で実装することです。テキストを画像にしてimg要素で実装し、空の代替テキストを指定すれば、誤解を招くような読み上げを避けることができます。ただし、画像を使うと、その部分だけ異なるフォントになってしまう、テキストの拡大縮小が難しくなる、読み込みに時間がかかる、などのデメリットもあります。「8-5 文字が画像になっている」も参照してください。


### 読み終えた部分が変化した際に通知する
JavaScriptでコンテンツが後から挿入されるようなケースでは、スクリーンリーダーにその変化を知らせることが必要です。要素を挿入した際、JavaScriptで強制的にその要素にフォーカスを移せば、その位置から読み上げが開始することが期待されます。ただし、この方法はユーザーの意思によらずにフォーカスを移動させます。何かを読んでいたり、入力していたりする最中にフォーカスを奪われると、ユーザーの作業は中断され、混乱することになります。フォーカスを移すのは、ユーザーがボタンを押してダイアログが出るケースなど、挙動が予想できる場合に限定したほうが良いでしょう。


### テキストを隠さずに表示する
スクリーンリーダー向けの隠しテキストを入れようとする場合は、それを本当に隠さなければならないのか検討しましょう。スクリーンリーダーのユーザーにとって有益な情報は、他のユーザーにとっても有益なことが多く、表示しても問題ない場合が多いはずです。特に見出しは、スクリーンリーダーの見出しジャンプ機能のためだけに存在するわけではなく、全てのユーザーにとって有益なものです。

逆に、ほとんどのユーザーにとって不要なものであれば、スクリーンリーダーのユーザーにとっても冗長な可能性が高いでしょう。スクリーンリーダーはテキストを順番に読んでいくため、なくてもよいような説明があると時間がかかってしまい、かえって読みづらくなることがあります。

それでも、スクリーンリーダー用の説明などがどうしても必要になる場合もあるでしょう。スクリーンリーダーはブラウザのレンダリング結果を読み上げるため、CSSのdisplay:noneを使って要素を消してしまうと、スクリーンリーダーにも読み上げられません。よく使われるのは、CSSのpositionを使用して、画面の外に要素を持っていく方法です。この方法であればスクリーンリーダーにも読まれます。ただし、フォーカスを受け取る要素をこの方法で画面外に持っていった場合、ビジュアルブラウザのユーザーがフォーカスを見失う危険性があります。



## コラム WAI-ARIAを活用する
WAI-ARIAを使用すると、その要素の役割や状態を通知したり、要素が変化することを通知することができます。本書の6章ではフォームの基本的なコントロールについて扱いましたが、時には、JavaScriptを駆使してカレンダーやスライダー、ドラッグして操作するインターフェイスなど、既存のコントロールでは実現できないUIを提供したいこともあるでしょう。この際、WAI-ARIAを活用すれば、スクリーンリーダーにもコントロールの意味や状態を伝えることができます。

WAI-ARIAでは要素のセマンティクスを消したり、追加したり、変更したりすることもできます。たとえば、「9-2セマンティクスが不適切」でとりあげたa要素をスライダーに見せかけている例も、以下のようにWAI-ARIAの属性を追加することで、スライダーであるというセマンティクスを持たせることができます。以下はjQuery Mobileの ThemeRollerで使用されているスライダーの例です（図2）。


図2：スライダーにWAI-ARIAを適用した例
WAI-ARIAを使用して要素のセマンティクスを明示することで、スクリーンリーダーにもスライダーであることが伝わるようにしている。


<div class="ui-slider">
  <input type="number" name="slider" value="50" class="ui-slider-input">
    <div role="application" class="ui-slider-track">
    <div class="ui-slider-bg"></div>
    <a href="#" class="ui-slider-handle" role="slider" aria-labelledby="slider-label"></a>
 </div> </div>


「9-6ラベルがマークアップされていない」で扱ったラベルについても、WAI-ARIAを使えば柔軟な対応が可能になります。WAI-ARIAを活用できるのはフォームだけではありません。この節で挙げた問題にも、以下のようにWAI-ARIAで対応できるものがあります。

* 読まれては困る部分にaria-hidden属性をつけると、スクリーンリーダーに無視される
* 情報が書き換わる箇所にaria-live属性をつけると、書き換わった際に読み上げられる
* role属性を使うと、その要素が何なのか通知される。ダイアログにrole="dialog"をつければ、それがダイアログであることがわかる
* aria-label属性やaria-describedby属性などで、スクリーンリーダー向けの説明を提供できる


このように、WAI-ARIAを活用することで、実装による問題解決の幅が大きく広がります。本書ではWAI-ARIAの詳細については触れませんが、本書の姉妹書である「コーディングWebアクセシビリティ」がWAI-ARIAの入門的な内容となっていますので、参考にしていただければ幸いです。

参考 AccessibleRichInternetApplications（WAI.ARIA）1.0
http://www.w3.org/TR/wai-aria/

参考 ThemeRoller|jQueryMobile
http://themeroller.jquerymobile.com/
